---
import type { CollectionEntry } from 'astro:content';

interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
const { title, description, pubDate, tags, category, image } = post.data;

const formattedDate = new Date(pubDate).toLocaleDateString('vi-VN', {
  year: 'numeric',
  month: 'short',
  day: 'numeric'
});
---

<article class="blog-card group">
  <a href={`/blog/blog/${post.slug}/`} class="block">
    {/* Featured Image */}
    {image && (
      <div class="mb-4 overflow-hidden rounded-lg -mx-2 -mt-2">
        <img 
          src={image} 
          alt={title}
          class="w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"
          loading="lazy"
        />
      </div>
    )}
    
    {/* Category & Date */}
    <div class="flex items-center gap-3 mb-3 text-sm">
      {category && (
        <span class="category text-xs">
          {category}
        </span>
      )}
      <time class="text-gray-500 dark:text-gray-400">
        {formattedDate}
      </time>
    </div>
    
    {/* Title */}
    <h2 class="text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors line-clamp-2">
      {title}
    </h2>
    
    {/* Description */}
    {description && (
      <p class="text-gray-600 dark:text-gray-400 line-clamp-2 mb-4">
        {description}
      </p>
    )}
    
    {/* Tags */}
    {tags && tags.length > 0 && (
      <div class="flex flex-wrap gap-2">
        {tags.slice(0, 3).map((tag) => (
          <span class="text-xs text-primary-600 dark:text-primary-400">
            #{tag}
          </span>
        ))}
        {tags.length > 3 && (
          <span class="text-xs text-gray-400">
            +{tags.length - 3}
          </span>
        )}
      </div>
    )}
  </a>
</article>
